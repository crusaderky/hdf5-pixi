[workspace]
channels = ["conda-forge"]
name = "hdf5-pixi"
platforms = ["linux-64", "linux-aarch64", "osx-64", "osx-arm64", "win-64"]
version = "0.1.0"

[activation.env]
NTHREADS = "4"
CONFIG = "Debug"
# CONFIG = "Developer"
# CONFIG = "Release"

[tasks]
clean = { cmd = "rm -rf build" }
init = { cmd = "cmake -S hdf5 -B build" }
build = { cwd = "build", cmd = "cmake --build . --parallel $NTHREADS --config $CONFIG", depends-on = ["init"] }
test = { cwd = "build", cmd = "ctest --output-on-failure --parallel $NTHREADS --build-config $CONFIG", depends-on = ["build"] }
pack = { cwd = "build", cmd = "cpack -C $CONFIG -V", depends-on = ["build"] }

[dependencies]
cmake = "*"
compilers = "*"
ninja = "*"
openjdk = "*"
